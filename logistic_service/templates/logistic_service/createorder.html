{% extends 'logistic_service/base.html' %}
{% load static %}

{%block HeaderBlock%}

{%endblock%}

{% block title %}
    {{title}}
{% endblock %}

{% block MainContent %}
    <div class="container">
        <form method="post">
            {%csrf_token%}
            <div class="error_wrapper">
                {% for error in form.phone_number.errors %}
                    {{ error | escape }}
                {% endfor %}
            </div>
            {{form.phone_number}} <br>

            <div class="error_wrapper">
                {% for error in form.street.errors %}
                    {{ error | escape }}
                {% endfor %}
            </div>

            <div class="error_wrapper">
                {% for error in form.district.errors %}
                    {{ error | escape }}
                {% endfor %}
            </div>
            <div id="idDistrict">
                {{form.district}}
            </div>
            <br>

            <div id="idStreet">
                {{form.street}}
            </div>
            <br>

            <div class="error_wrapper">
                {% for error in form.mass.errors %}
                    {{ error | escape }}
                {% endfor %}
            </div>
            {{form.mass}} <br>

            <button class="w-100 btn btn-primary btn-lg" type="submit">Оформить заказ</button>
            <span>{{error}}</span>
        </form>
    </div>
    <script>
        var district = document.getElementById('id_district');
        var streets = document.getElementById('id_street');

        district.addEventListener('change', changes);



        function changes() {
            streets.innerHTML = '';
            streets.append(new Option('Выберите улицу', 'empty'));
            console.log(district.options[district.selectedIndex].text);
            {% for street in streets %}
                if (district.options[district.selectedIndex].text == `{{ street.district }}`) {
                    streets.append(new Option('{{street.name}}', '{{ street.district }}'));
                }
            {% endfor %}
        }
    </script>
{% endblock %}